import{a as o}from"./axios-CCb-kr4I.js";import{P as s}from"./index-E7HFo_Uv.js";const a=o.create({baseURL:void 0,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}});a.interceptors.response.use(e=>e,async e=>{const r=e.config;if(e.response&&e.response.status===401&&!r._retry){r._retry=!0;try{const t=await a.post("/auth/refresh-token",{refreshToken:localStorage.getItem("refreshToken")});return localStorage.setItem("authToken",t.data.accessToken),a.defaults.headers.common.Authorization=`Bearer ${t.data.accessToken}`,r.headers.Authorization=`Bearer ${t.data.accessToken}`,a(r)}catch{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s.push({path:"/user/signin",query:{redirect:r.url}})}}return Promise.reject(e)});export{a};
