import{r as o,b as S,c as n,a as t,w as f,v as C,d as L,z as d,e as U,E as g,o as r}from"./index-E7HFo_Uv.js";import{a as _}from"./axios-CCb-kr4I.js";const B={class:"container"},D={key:0},E=t("h1",null,"관리자 페이지 로그인",-1),M={class:"mb-3 text-start"},V=t("label",{for:"id",class:"form-label"},"아이디",-1),P={class:"mb-3 text-start position-relative"},q=t("label",{for:"password",class:"form-label"},"비밀번호",-1),A={class:"input-group"},I=["type"],N=["disabled"],R={key:1},$=t("h1",null,"관리자 페이지",-1),z={key:0,class:"update-time"},K={key:0,class:"update-time"},j=t("div",null,[t("button",{class:"update-btn"},"베지 추가")],-1),y="http://localhost:8080/master",J={__name:"master",setup(F){const u=o(""),p=o(""),v=o(""),h=o(""),b=o(!1),a=o(""),l=o(""),i=o(!1),k=()=>{i.value=!i.value},w=async()=>{if(!a.value||!l.value){alert("아이디와 비밀번호를 모두 입력해주세요");return}try{const e=await _.post("http://localhost:8080/member/login",{id:a.value,password:l.value}),s=e.data.response.data.token;console.log("Token received:",s),e.status===200&a.value=="admin"?(alert("Login successful!"),b.value=!0,localStorage.setItem("authToken",s)):alert("권한 없음")}catch(e){console.error("Login failed:",e),alert("Login failed. Please check your credentials.")}},c=()=>new Date().toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),x=async()=>{try{const{data:e}=await _.get(`${y}/update/stock`);p.value=c(),alert("주식 가격 업데이트 성공!")}catch(e){console.error("주식 가격 업데이트 오류:",e),h.value="주식 가격 업데이트에 실패했습니다. 다시 시도하세요."}},T=async()=>{try{const{data:e}=await _.get(`${y}/update/coin`);v.value=c(),alert("코인 가격 업데이트 성공!")}catch(e){console.error("코인 가격 업데이트 오류:",e),h.value="코인 가격 업데이트에 실패했습니다. 다시 시도하세요."}};return S(()=>{u.value=c(),setInterval(()=>{u.value=c()},1e3)}),(e,s)=>(r(),n("div",B,[b.value?(r(),n("div",R,[$,t("div",null,[t("p",null,"접속 시간 : "+d(u.value),1)]),t("div",null,[t("button",{class:"update-btn",onClick:x},"주식 가격 update"),p.value?(r(),n("p",z,"최근 업데이트: "+d(p.value),1)):g("",!0)]),t("div",null,[t("button",{class:"update-btn",onClick:T},"코인 가격 update"),v.value?(r(),n("p",K,"최근 업데이트: "+d(v.value),1)):g("",!0)]),j])):(r(),n("div",D,[E,t("form",{onSubmit:U(w,["prevent"])},[t("div",M,[V,f(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=m=>a.value=m),class:"form-control",id:"id",placeholder:"이메일 주소를 입력해주세요",required:""},null,512),[[C,a.value]])]),t("div",P,[q,t("div",A,[f(t("input",{type:i.value?"text":"password","onUpdate:modelValue":s[1]||(s[1]=m=>l.value=m),class:"form-control",id:"password",placeholder:"비밀번호를 입력해주세요",required:""},null,8,I),[[L,l.value]]),t("button",{type:"button",class:"btn btn-outline-secondary password-toggle pw-btn",onClick:k},d(i.value?"off":"on"),1)])]),t("button",{type:"submit",class:"login-btn",disabled:!a.value||!l.value},"로그인",8,N)],32)]))]))}};export{J as default};
