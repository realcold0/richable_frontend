import{_ as I,r as d,c as U,a as e,w as f,v as m,f as h,g as y,e as B,u as E,h as N,o as R,i as x,p as j,j as q}from"./index-E7HFo_Uv.js";import{u as F}from"./passwordResetStore-CTrFPaw3.js";import{a as w}from"./axios-CCb-kr4I.js";const n=c=>(j("data-v-4094e907"),c=c(),q(),c),P={id:"findpassword",class:"find-pw-container"},M=n(()=>e("h2",{class:"text-center mb-4",style:{"font-size":"20px"}},"비밀번호 재설정",-1)),T={class:"mb-4 text-start"},W=n(()=>e("label",{for:"id",class:"form-label"},"아이디",-1)),$={class:"input-group"},z={class:"mb-4 text-start"},A=n(()=>e("label",{for:"email",class:"form-label"},"이메일",-1)),D={class:"input-group"},L={class:"mb-5 text-start"},G=n(()=>e("label",{for:"verificationCode",class:"form-label"},"인증코드",-1)),H={class:"input-group"},J={class:"mb-5 text-center"},K=n(()=>e("br",null,null,-1)),O=n(()=>e("br",null,null,-1)),g="http://localhost:8080/member",Q={__name:"FindPassWord",setup(c){const C=E(),_=F(),a=d(""),i=d(""),u=d(""),k=d(!1),p=d(!1),V=async()=>{var r,s,t,o;if(i.value&&a.value)try{const l=await w.post(`${g}/find/pw`,{email:i.value,id:a.value});l.data.success?(alert(((s=(r=l.data.response)==null?void 0:r.data)==null?void 0:s.message)||"인증 코드가 전송되었습니다."),k.value=!0):alert(l.data.response||"인증 코드 전송에 실패했습니다.")}catch(l){console.error("Error sending verification code:",l),alert(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"오류가 발생했습니다.")}else alert("아이디와 이메일을 모두 입력해주세요.")},v=async()=>{var r,s;if(u.value)try{const t=await w.post(`${g}/find/pw/auth`,{email:i.value,id:a.value,code:u.value});t.data.success?(p.value=!0,alert("이메일 인증 성공")):alert(t.data.response||"인증에 실패했습니다.")}catch(t){console.error("Error verifying code:",t),alert(((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||"인증 코드가 일치하지 않습니다.")}else alert("인증 코드를 입력해주세요.")},b=async()=>{p.value?(_.setVerified(!0),_.setUserId(a.value),C.push({name:"findpassword2"})):alert("먼저 이메일 인증을 완료해주세요.")},S=()=>{p.value?b():v()};return(r,s)=>{const t=N("router-link");return R(),U("div",P,[M,e("form",{onSubmit:B(S,["prevent"])},[e("div",T,[W,e("div",$,[f(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),class:"form-control",id:"id",placeholder:"아이디를 입력해 주세요",required:""},null,512),[[m,a.value]])])]),e("div",z,[A,e("div",D,[f(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),class:"form-control",id:"email",placeholder:"이메일 주소를 입력해주세요",required:""},null,512),[[m,i.value]]),e("button",{type:"button",class:"btn btn-secondary",onClick:V}," 인증번호 ")])]),e("div",L,[G,e("div",H,[f(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>u.value=o),class:"form-control",id:"verificationCode",placeholder:"인증 코드 6자를 입력하세요.",required:""},null,512),[[m,u.value]]),e("button",{type:"button",class:"btn btn-secondary",onClick:v}," 확인 ")])]),e("div",{class:"mb-5"},[e("button",{type:"button",class:"btn btn-secondary w-100 mb-3",onClick:b}," 계속 ")]),e("div",J,[h(t,{to:"/user/findid",class:"join-link"},{default:y(()=>[x("아이디 찾기")]),_:1}),K,O,h(t,{to:"/user/signin",class:"join-link"},{default:y(()=>[x("다른 방법으로 로그인")]),_:1})])],32)])}}},ee=I(Q,[["__scopeId","data-v-4094e907"]]);export{ee as default};
